import{a as ht}from"./chunk-VA2XFZ73.js";import"./chunk-BV5OK7LD.js";import{a as _t}from"./chunk-C266OGI4.js";import{a as Q,b as U,d as W,e as X,g as Y,h as Z,i as tt,j as et,k as it,l as ot,m as rt,n as nt,o as at,p as st,q as mt,r as lt,s as ct,t as dt,u as ut,v as pt,w as Ct,y as ft}from"./chunk-MT3NPNYF.js";import"./chunk-5L3ICMBY.js";import{$ as v,aa as H,ca as $,ea as P,fa as y,ha as q,ia as z,ka as O,la as L,ma as J,na as K}from"./chunk-P6QF5PR7.js";import"./chunk-EJJBCPAK.js";import{n as w}from"./chunk-465FC233.js";import{Da as E,Ea as I,Eb as p,Jb as T,Mb as o,Nb as r,Ob as C,Pb as f,Qb as _,Sb as A,Vb as h,Xb as F,a as N,ad as B,b as k,cd as G,fc as n,hb as s,hc as d,ib as c,ja as g,oc as V,pc as j,ta as D,ua as b,zb as m}from"./chunk-LA57Z5ON.js";function xt(t,i){t&1&&n(0," Este campo es obligatorio ")}function Mt(t,i){t&1&&n(0," Este campo es obligatorio ")}var x=class t{constructor(i,e,a){this.matDialogRef=i;this.formBuilder=e;this.data=a;this.cursoForm=this.formBuilder.group({nombre:[null,[y.required]],cantidadClases:[null,[y.required]]}),this.patchFormValue()}cursoForm;get estaEditando(){return!!this.data?.cursoEditado}patchFormValue(){this.data?.cursoEditado&&this.cursoForm.patchValue(this.data?.cursoEditado)}guardar(){this.cursoForm.invalid?this.cursoForm.markAllAsTouched():this.matDialogRef.close(k(N({},this.cursoForm.value),{id:this.estaEditando?this.data.cursoEditado.id:_t(4),fechaCreacion:this.estaEditando?this.data.cursoEditado.fechaCreacion:new Date}))}static \u0275fac=function(e){return new(e||t)(c(Y),c(K),c(Z))};static \u0275cmp=D({type:t,selectors:[["app-cursos-dialog"]],decls:24,vars:4,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[3,"formGroup"],[1,"row"],[1,"col-6"],[1,"example-form-field"],["formControlName","nombre","matInput","","type","text"],["formControlName","cantidadClases","matInput","","type","text"],["mat-dialog-actions",""],["mat-dialog-close","","mat-raised-button",""],["mat-raised-button","",3,"click"]],template:function(e,a){if(e&1&&(o(0,"h1",0),n(1),r(),o(2,"div",1)(3,"form",2)(4,"div",3)(5,"div",4)(6,"mat-form-field",5)(7,"mat-label"),n(8,"Nombre"),r(),C(9,"input",6),o(10,"mat-error"),m(11,xt,1,0),r()()(),o(12,"div",4)(13,"mat-form-field",5)(14,"mat-label"),n(15,"Cantidad de Clases"),r(),C(16,"input",7),o(17,"mat-error"),m(18,Mt,1,0),r()()()()()(),o(19,"div",8)(20,"button",9),n(21,"Cancelar"),r(),o(22,"button",10),h("click",function(){return a.guardar()}),n(23,"Guardar"),r()()),e&2){let l,u;s(),d("",a.data!=null&&a.data.cursoEditado?"Editar":"Crear"," Curso"),s(2),p("formGroup",a.cursoForm),s(8),T((l=a.cursoForm.get("nombre"))!=null&&l.hasError("required")?11:-1),s(7),T((u=a.cursoForm.get("cantidadClases"))!=null&&u.hasError("required")?18:-1)}},dependencies:[v,W,Q,U,X,et,it,rt,ot,O,P,q,z,L,J]})};function St(t,i){t&1&&(o(0,"th",11),n(1," No. "),r())}function Et(t,i){if(t&1&&(o(0,"td",12),n(1),r()),t&2){let e=i.$implicit;s(),d(" ",e.id," ")}}function It(t,i){t&1&&(o(0,"th",11),n(1," nombre "),r())}function Tt(t,i){if(t&1&&(o(0,"td",12),n(1),r()),t&2){let e=i.$implicit;s(),d(" ",e.nombre," ")}}function Ft(t,i){t&1&&(o(0,"th",11),n(1," Cantidad de Clases "),r())}function wt(t,i){if(t&1&&(o(0,"td",12),n(1),r()),t&2){let e=i.$implicit;s(),d(" ",e.cantidadClases," ")}}function yt(t,i){t&1&&(o(0,"th",11),n(1," Fecha de Creacion "),r())}function Rt(t,i){if(t&1&&(o(0,"td",12),n(1),V(2,"date"),r()),t&2){let e=i.$implicit;s(),d(" ",j(2,1,e.fechaCreacion)," ")}}function Nt(t,i){t&1&&(o(0,"th",11),n(1," Acciones "),r())}function kt(t,i){if(t&1){let e=A();o(0,"td",12)(1,"button",13),h("click",function(){let l=E(e).$implicit,u=F();return I(u.abrirModal(l))}),o(2,"mat-icon"),n(3,"edit"),r()(),o(4,"button",13),h("click",function(){let l=E(e).$implicit,u=F();return I(u.eliminar(l.id))}),o(5,"mat-icon"),n(6,"delete"),r()()()}}function At(t,i){t&1&&C(0,"tr",14)}function Vt(t,i){t&1&&C(0,"tr",15)}var M=class t{constructor(i,e){this.cursosServicio=i;this.matDialog=e}displayedColumns=["id","nombre","cantidadClases","fechaCreacion","acciones"];cursos=[];ngOnInit(){this.cargarCursos()}cargarCursos(){this.cursosServicio.getCursos().subscribe({next:i=>{this.cursos=i},error:i=>{console.log(i)}})}abrirModal(i){this.matDialog.open(x,{data:{cursoEditado:i}}).afterClosed().subscribe({next:e=>{e&&(i?this.handleActualizar(i.id,e):(this.cursos=[...this.cursos,e],this.cursosServicio.crearCurso(e).subscribe({next:()=>this.cargarCursos()})))},error:e=>{console.log(e)}})}handleActualizar(i,e){this.cursosServicio.actualizarCursoPorId(i,e).subscribe({next:a=>{this.cursos=a},error:a=>{console.log(a)}})}eliminar(i){this.cursosServicio.removerCursoPorId(i).subscribe({next:e=>{this.cursos=e},error:e=>{console.log(e)}})}static \u0275fac=function(e){return new(e||t)(c(ht),c(tt))};static \u0275cmp=D({type:t,selectors:[["app-cursos"]],decls:26,vars:3,consts:[["mat-raised-button","",3,"click"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","nombre"],["matColumnDef","cantidadClases"],["matColumnDef","fechaCreacion"],["matColumnDef","acciones"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(e,a){e&1&&(o(0,"h1"),n(1,"Listado de Cursos"),r(),o(2,"button",0),h("click",function(){return a.abrirModal()}),o(3,"mat-icon"),n(4,"add"),r(),n(5,` Crear Curso
`),r(),o(6,"h2"),n(7,"Tabla Cursos"),r(),o(8,"table",1),f(9,2),m(10,St,2,0,"th",3)(11,Et,2,1,"td",4),_(),f(12,5),m(13,It,2,0,"th",3)(14,Tt,2,1,"td",4),_(),f(15,6),m(16,Ft,2,0,"th",3)(17,wt,2,1,"td",4),_(),f(18,7),m(19,yt,2,0,"th",3)(20,Rt,3,3,"td",4),_(),f(21,8),m(22,Nt,2,0,"th",3)(23,kt,7,0,"td",4),_(),m(24,At,1,0,"tr",9)(25,Vt,1,0,"tr",10),r()),e&2&&(s(8),p("dataSource",a.cursos),s(16),p("matHeaderRowDef",a.displayedColumns),s(),p("matRowDefColumns",a.displayedColumns))},dependencies:[v,H,$,nt,st,dt,mt,at,ut,lt,ct,pt,Ct,B]})};var jt=[{path:"",component:M}],S=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=b({type:t});static \u0275inj=g({imports:[w.forChild(jt),w]})};var gt=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=b({type:t});static \u0275inj=g({imports:[G,S,ft]})};export{gt as CursosModule};
