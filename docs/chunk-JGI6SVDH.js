import{a as Fe}from"./chunk-VA2XFZ73.js";import{a as K}from"./chunk-BV5OK7LD.js";import{a as v}from"./chunk-C266OGI4.js";import{a as ne,b as re,d as le,e as se,f as me,g as ce,h as pe,i as de,j as ue,k as Ce,l as fe,m as ve,n as ge,o as he,p as _e,q as be,r as De,s as Se,t as xe,u as Me,v as Ee,w as Ie,y as ye}from"./chunk-MT3NPNYF.js";import"./chunk-5L3ICMBY.js";import{$ as M,X as Q,aa as W,ca as X,ea as Y,fa as E,ha as Z,ia as ee,ka as te,la as ie,ma as ae,na as oe}from"./chunk-P6QF5PR7.js";import"./chunk-EJJBCPAK.js";import{b as J,n as A}from"./chunk-465FC233.js";import{$c as q,Da as N,Ea as O,Eb as s,H as w,Jb as j,Mb as a,Nb as o,Ob as g,Pb as h,Qb as _,Sb as $,Vb as C,Xb as k,Zc as U,a as D,b as B,cd as z,fc as n,gc as L,hb as l,hc as f,ia as H,ib as p,ja as S,na as V,oc as P,pc as G,ta as u,ua as x,zb as m}from"./chunk-LA57Z5ON.js";function Oe(e,i){e&1&&n(0," Este campo es obligatorio ")}function je(e,i){e&1&&n(0," Este campo es obligatorio ")}function ke(e,i){if(e&1&&(a(0,"mat-option",9),n(1),o()),e&2){let t=i.$implicit;s("value",t.id),l(),L(t.nombre)}}var I=class e{constructor(i,t,r,c){this.matDialogRef=i;this.formBuilder=t;this.cursosServicio=r;this.data=c;this.claseForm=this.formBuilder.group({tema:[null,[E.required]],duracion:[null,[E.required]],idCurso:[null,[E.required]]}),this.patchFormValue(),this.cursos=this.cursosServicio.getCursos()}claseForm;cursos;get estaEditando(){return!!this.data?.claseEditado}patchFormValue(){this.data?.claseEditado&&this.claseForm.patchValue(this.data?.claseEditado)}guardar(){this.claseForm.invalid?this.claseForm.markAllAsTouched():this.matDialogRef.close(B(D({},this.claseForm.value),{id:this.estaEditando?this.data.claseEditado.id:v(4)}))}static \u0275fac=function(t){return new(t||e)(p(ce),p(oe),p(Fe),p(pe))};static \u0275cmp=u({type:e,selectors:[["app-clases-dialog"]],decls:39,vars:12,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[3,"formGroup"],[1,"row"],[1,"col-6"],[1,"example-form-field","casilla"],["formControlName","tema","matInput","","type","text"],[1,"example-form-field"],["formControlName","duracion"],[3,"value"],["formControlName","idCurso"],[3,"value",4,"ngFor","ngForOf"],["mat-dialog-actions",""],["mat-dialog-close","","mat-raised-button",""],["mat-raised-button","",3,"click"]],template:function(t,r){if(t&1&&(a(0,"h1",0),n(1),o(),a(2,"div",1)(3,"form",2)(4,"div",3)(5,"div",4)(6,"mat-form-field",5)(7,"mat-label"),n(8,"Tema de la clase"),o(),g(9,"input",6),a(10,"mat-error"),m(11,Oe,1,0),o()(),a(12,"mat-form-field",7)(13,"mat-label"),n(14,"Duracion (Horas)"),o(),a(15,"mat-select",8)(16,"mat-option",9),n(17,"1"),o(),a(18,"mat-option",9),n(19,"2"),o(),a(20,"mat-option",9),n(21,"3"),o(),a(22,"mat-option",9),n(23,"4"),o(),a(24,"mat-option",9),n(25,"5"),o()(),a(26,"mat-error"),m(27,je,1,0),o()(),a(28,"mat-form-field")(29,"mat-label"),n(30,"Curso"),o(),a(31,"mat-select",10),m(32,ke,2,2,"mat-option",11),P(33,"async"),o()()()()()(),a(34,"div",12)(35,"button",13),n(36,"Cancelar"),o(),a(37,"button",14),C("click",function(){return r.guardar()}),n(38,"Guardar"),o()()),t&2){let c,d;l(),f("",r.data!=null&&r.data.claseEditado?"Editar":"Crear"," Clase"),l(2),s("formGroup",r.claseForm),l(8),j((c=r.claseForm.get("tema"))!=null&&c.hasError("required")?11:-1),l(5),s("value",1),l(2),s("value",2),l(2),s("value",3),l(2),s("value",4),l(2),s("value",5),l(3),j((d=r.claseForm.get("duracion"))!=null&&d.hasError("required")?27:-1),l(5),s("ngForOf",G(33,10,r.cursos))}},dependencies:[U,M,le,ne,re,se,me,Q,ue,Ce,ve,fe,te,Y,Z,ee,ie,ae,q],styles:[".casilla[_ngcontent-%COMP%]{margin-right:10px}"]})};var ft=[{id:v(4),tema:"Modulos",duracion:2,idCurso:"3dse"},{id:v(4),tema:"Encriptacion",duracion:2,idCurso:"Drce"},{id:v(4),tema:"Variables",duracion:1,idCurso:"Bfe4"}],y=class e{constructor(i){this.httpClient=i}baseURL=K.ApiBaseURL;getClases(){return this.httpClient.get(`${this.baseURL}/clases`)}crearClase(i){return this.httpClient.post(`${this.baseURL}/clases`,D({},i))}actualizarClasePorId(i,t){return this.httpClient.patch(`${this.baseURL}/clases/${i}`,t).pipe(w(()=>this.getClases()))}removerClasePorId(i){return this.httpClient.delete(`${this.baseURL}/clases/${i}`).pipe(w(()=>this.getClases()))}static \u0275fac=function(t){return new(t||e)(V(J))};static \u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"})};function Be(e,i){e&1&&(a(0,"th",10),n(1," ID "),o())}function He(e,i){if(e&1&&(a(0,"td",11),n(1),o()),e&2){let t=i.$implicit;l(),f(" ",t.id," ")}}function Ve(e,i){e&1&&(a(0,"th",10),n(1," Tema de la Clase "),o())}function $e(e,i){if(e&1&&(a(0,"td",11),n(1),o()),e&2){let t=i.$implicit;l(),f(" ",t.tema," ")}}function Le(e,i){e&1&&(a(0,"th",10),n(1," Duracion de la Clase (Horas)"),o())}function Pe(e,i){if(e&1&&(a(0,"td",11),n(1),o()),e&2){let t=i.$implicit;l(),f(" ",t.duracion," ")}}function Ge(e,i){e&1&&(a(0,"th",10),n(1," Acciones "),o())}function Ue(e,i){if(e&1){let t=$();a(0,"td",11)(1,"button",12),C("click",function(){let c=N(t).$implicit,d=k();return O(d.abrirModal(c))}),a(2,"mat-icon"),n(3,"edit"),o()(),a(4,"button",12),C("click",function(){let c=N(t).$implicit,d=k();return O(d.eliminar(c.id))}),a(5,"mat-icon"),n(6,"delete"),o()()()}}function qe(e,i){e&1&&g(0,"tr",13)}function ze(e,i){e&1&&g(0,"tr",14)}var F=class e{constructor(i,t){this.clasesServicio=i;this.matDialog=t}displayedColumns=["id","tema","duracion","acciones"];clases=[];ngOnInit(){this.cargarClases()}cargarClases(){this.clasesServicio.getClases().subscribe({next:i=>{this.clases=i}})}abrirModal(i){this.matDialog.open(I,{data:{claseEditado:i}}).afterClosed().subscribe({next:t=>{console.log("Recibimos: ",t),t&&(i?this.handleActualizar(i.id,t):(this.clases=[...this.clases,t],this.clasesServicio.crearClase(t).subscribe({next:()=>this.cargarClases(),error:r=>{console.log(r)}})))}})}handleActualizar(i,t){this.clasesServicio.actualizarClasePorId(i,t).subscribe({next:r=>{this.clases=r},error:()=>{},complete:()=>{}})}eliminar(i){this.clasesServicio.removerClasePorId(i).subscribe({next:t=>{this.clases=t}})}static \u0275fac=function(t){return new(t||e)(p(y),p(de))};static \u0275cmp=u({type:e,selectors:[["app-clases"]],decls:23,vars:3,consts:[["mat-raised-button","",3,"click"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","tema"],["matColumnDef","duracion"],["matColumnDef","acciones"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,r){t&1&&(a(0,"h1"),n(1,"Listado de Clases"),o(),a(2,"button",0),C("click",function(){return r.abrirModal()}),a(3,"mat-icon"),n(4,"add"),o(),n(5,` Crear Clase
`),o(),a(6,"h2"),n(7,"Tabla Clases"),o(),a(8,"table",1),h(9,2),m(10,Be,2,0,"th",3)(11,He,2,1,"td",4),_(),h(12,5),m(13,Ve,2,0,"th",3)(14,$e,2,1,"td",4),_(),h(15,6),m(16,Le,2,0,"th",3)(17,Pe,2,1,"td",4),_(),h(18,7),m(19,Ge,2,0,"th",3)(20,Ue,7,0,"td",4),_(),m(21,qe,1,0,"tr",8)(22,ze,1,0,"tr",9),o()),t&2&&(l(8),s("dataSource",r.clases),l(13),s("matHeaderRowDef",r.displayedColumns),l(),s("matRowDefColumns",r.displayedColumns))},dependencies:[M,W,X,ge,_e,xe,be,he,Me,De,Se,Ee,Ie]})};var T=class e{static \u0275fac=function(t){return new(t||e)};static \u0275cmp=u({type:e,selectors:[["app-detalle-clase"]],decls:2,vars:0,template:function(t,r){t&1&&(a(0,"p"),n(1,"detalle-clase works!"),o())}})};var Je=[{path:"",component:F},{path:":id",component:T}],R=class e{static \u0275fac=function(t){return new(t||e)};static \u0275mod=x({type:e});static \u0275inj=S({imports:[A.forChild(Je),A]})};var Re=class e{static \u0275fac=function(t){return new(t||e)};static \u0275mod=x({type:e});static \u0275inj=S({imports:[z,R,ye]})};export{Re as ClasesModule};
